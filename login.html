<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600,700&display=swap">
    <title>Surveypoll | Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family:'Inter', sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #0d0d0d;
        }
        
        .login-container {
            display: flex;
            width: 100%;
            max-width: 900px;
            height: 560px;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .left-panel {
            position: relative;
            flex: 1;
            background-color: #121212;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            overflow: hidden;
        }
        
        .overlay-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(130deg, rgba(0, 0, 0, 0.8) 0%, transparent 50%, rgba(0, 0, 0, 0.2) 100%);
            z-index: 1;
        }
        
        .image-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
            background-image: url('images/login.jpg');
            background-size: cover;
            filter: brightness(0.7) contrast(1.2);
        }
        
        .secondary-login {
            position: relative;
            z-index: 2;
            padding: 20px;
        }
        
        .secondary-login button {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
        }
        
        .brand-logo {
            position: relative;
            z-index: 2;
            padding: 20px;
            margin-top: auto;
            display: flex;
            align-items: center;
        }
        
        .brand-logo img {
            height: 24px;
        }
        
        .copyright {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            margin-left: 10px;
        }
        
        .right-panel {
            flex: 1;
            background-color: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
        }
        
        .corporate-branding {
            text-align: right;
            margin-bottom: 20px;
        }
        
        .corporate-branding h3 {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }
        
        .corporate-branding p {
            font-size: 11px;
            color: #777;
        }
        
        .login-form {
            margin-top: 50px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .login-form h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 50px;
            color: #222;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 14px;
            color: #555;
        }
        
        .form-group input {
            width: 100%;
            padding: 14px;
            border: none;
            background-color: #f2f2f2;
            border-radius: 10px;
            font-size: 16px;
            color: #333;
        }
        
        .form-group input::placeholder {
            color: #aaa;
        }
        
        .login-button {
            background-color: #1a2b34;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 20px;
            margin-bottom: 20px;
            transition: background-color 0.2s;
            width: fit-content;
        }
        
        .login-button:hover {
            background-color: #111a20;
        }
        
        .forgot-password {
            font-size: 12px;
            color: #555;
            text-decoration: none;
            margin-left: 15px;
        }
        
        .forgot-password:hover {
            text-decoration: underline;
        }
        
        .action-row {
            display: flex;
            align-items: center;
        }
        
        .footer {
            margin-top: auto;
            font-size: 10px;
            color: #aaa;
        }
        
        @media (max-width: 900px) {
            .login-container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
                max-width: 100vw;
                border-radius: 0;
            }
            .left-panel, .right-panel {
                flex: none;
                width: 100%;
                min-height: 220px;
                padding: 24px 0;
            }
            .right-panel {
                padding: 32px 16px;
            }
        }
        @media (max-width: 600px) {
            .login-container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
                max-width: 100vw;
                border-radius: 0;
                box-shadow: none;
            }
            .left-panel, .right-panel {
                flex: none;
                width: 100%;
                min-height: 120px;
                padding: 16px 0;
            }
            .right-panel {
                padding: 24px 1rem;
            }
            .login-form h1 {
                font-size: 20px;
                margin-bottom: 24px;
            }
            .form-group label, .login-button {
                font-size: 13px;
            }
            .login-button {
                padding: 12px 12px;
                border-radius: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="left-panel">
            <div class="image-background"></div>
            <div class="overlay-gradient"></div>
            <div class="secondary-login">
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="8" y1="12" x2="16" y2="12"></line>
                        <line x1="12" y1="8" x2="12" y2="16"></line>
                    </svg>
                    Surveypoll Login
                </button>
            </div>
            <div class="brand-logo">
                <svg width="120" height="24" viewBox="0 0 120 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 12H4V16H0V12Z" fill="white"/>
                    <path d="M4 8H8V12H4V8Z" fill="white"/>
                    <path d="M8 4H12V8H8V4Z" fill="white"/>
                    <path d="M12 0H16V4H12V0Z" fill="white"/>
                    <path d="M0 16H4V20H0V16Z" fill="white"/>
                    <path d="M4 20H8V24H4V20Z" fill="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M19 6.5H24V9H19V6.5ZM25.5 6.5H44V9H25.5V6.5ZM46 6.5H51.5V9H46V6.5ZM53 6.5H58.5V9H53V6.5ZM62.5 6.5H67V9H62.5V6.5ZM68.5 6.5H73.5V9H68.5V6.5ZM75 6.5H80.5V9H75V6.5ZM82 6.5H87.5V9H82V6.5ZM89 6.5H94.5V9H89V6.5ZM96 6.5H101.5V9H96V6.5ZM103 6.5H108.5V9H103V6.5ZM110 6.5H115.5V9H110V6.5Z" fill="white"/>
                    <text x="25" y="16" font-family="Arial" font-size="12" fill="white">Surveypoll</text>
                </svg>
                <span class="copyright">© Surveypoll Limited 2025</span>
            </div>
        </div>
        <div class="right-panel">
            <div class="corporate-branding">
                <h3>Surveypoll™</h3>
                <p>Survey data management platform</p>
            </div>
            <div class="login-form">
                <h1>Welcome, login to Surveypoll admin account.</h1>
                <div class="form-group">
                    <label for="username">Email Address:</label>
                    <input type="text" id="username" placeholder="username@domain.com">
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <div style="position:relative;display:flex;align-items:center;">
                        <input type="password" id="password" placeholder="Your PIN or Password" style="flex:1;">
                        <button type="button" id="toggle-password" style="position:absolute;right:8px;background:none;border:none;cursor:pointer;color:#888;font-size:18px;outline:none;display:flex;align-items:center;justify-content:center;">
                            <span id="eye-icon">
                                <svg id="eye-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            </span>
                        </button>
                    </div>
                    <div id="login-error" style="color:#e11d48;font-size:13px;margin-top:8px;min-height:18px;"></div>
                </div>
                <div class="action-row">
                    <button id="login-btn" class="login-button">Sign In</button>
                  
                </div>
            </div>
            <div class="footer">
                <p>www.codegridd.vercel.app</p>
            </div>
        </div>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCpVlceZdzdxbe0kckQtkSin53xQijrtjs",
        authDomain: "codegrid-d9bd5.firebaseapp.com",
        projectId: "codegrid-d9bd5",
        storageBucket: "codegrid-d9bd5.firebasestorage.app",
        messagingSenderId: "190980241132",
        appId: "1:190980241132:web:38d9281c43cc3e36a217c9",
        measurementId: "G-M3Y4787QME"
      };
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // Redirect to admin.html if already logged in
      onAuthStateChanged(auth, user => {
        if (user) {
          window.location.href = 'admin.html';
        }
      });

      // Login logic
      const loginError = document.getElementById('login-error');
      document.getElementById('login-btn').addEventListener('click', async function(e) {
        e.preventDefault();
        const email = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        loginError.textContent = '';
        if (email && password) {
          try {
            await signInWithEmailAndPassword(auth, email, password);
            // Redirect happens automatically via onAuthStateChanged
          } catch (err) {
            loginError.textContent = err.message.replace('Firebase: ', '');
          }
        } else {
          loginError.textContent = 'Please enter both email and password.';
        }
      });

      // Handle form submission on Enter key
      document.getElementById('password').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          document.getElementById('login-btn').click();
        }
      });

      // Always clear fields on page load and when page is shown (e.g. back navigation)
      function clearLoginFields() {
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
      }
      clearLoginFields();
      window.addEventListener('pageshow', clearLoginFields);

      // Password visibility toggle with SVG icons
      const passwordInput = document.getElementById('password');
      const togglePassword = document.getElementById('toggle-password');
      const eyeIcon = document.getElementById('eye-icon');
      let pwVisible = false;
      const eyeSVG = '<svg id="eye-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"></path><circle cx="12" cy="12" r="3"></circle></svg>';
      const eyeOffSVG = '<svg id="eye-off-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.81 21.81 0 0 1 5.06-6.06M1 1l22 22"></path><path d="M9.53 9.53A3.5 3.5 0 0 0 12 15.5c1.38 0 2.63-.56 3.54-1.47"></path></svg>';
      togglePassword.addEventListener('click', () => {
        pwVisible = !pwVisible;
        passwordInput.type = pwVisible ? 'text' : 'password';
        eyeIcon.innerHTML = pwVisible ? eyeOffSVG : eyeSVG;
      });

      // Clear error on input
      document.getElementById('username').addEventListener('input', () => { loginError.textContent = ''; });
      passwordInput.addEventListener('input', () => { loginError.textContent = ''; });
    </script>
</body>
</html>